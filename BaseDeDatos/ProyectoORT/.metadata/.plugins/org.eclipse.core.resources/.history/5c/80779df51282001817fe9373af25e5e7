Create or Replace Procedure ESQUEMA.SP_Prestamos_ObtenerPK)
DYNAMIC RESULT SETS 1

P1:Begin

DECLARE c1 CURSOR WITH RETURN FOR Select 
PRESTAMOS.LIBROS_CODIGO,
PRESTAMOS.PERSONAS_CEDULA,
CHAR(PRESTAMOS_FECHA_DESDE, ISO) as PRESTAMOS_FECHA_DESDE,
CHAR(PRESTAMOS_FECHA_HASTA, ISO) as PRESTAMOS_FECHA_HASTA,
LIBROS.LIBROS_CODIGO,
LIBROS.LIBROS_TITULO,
LIBROS.LIBROS_ISBN,
LIBROS.LIBROS_ANIO,
LIBROS.LIBROS_DESCRIPCION,
LIBROS.LIBROS_DISPONIBLE,
LIBROS.TIPOS_CODIGO,
PERSONAS.PERSONAS_CEDULA,
PERSONAS.PERSONAS_MAIL,
PERSONAS.PERSONAS_NOMBRE
from 
ESQUEMA.PRESTAMOS PRESTAMOS, 
ESQUEMA.LIBROS LIBROS, 
ESQUEMA.PERSONAS PERSONAS 
WHERE
	prestamos.LIBROS_CODIGO = libros.LIBROS_CODIGO 
	and  prestamos.PERSONAS_CEDULA = personas.PERSONAS_CEDULA;
OPEN C1;

End p1